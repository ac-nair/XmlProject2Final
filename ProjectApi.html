<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>US Business News</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <h1>US Business News</h1>

    <div class="search-bar">
        <input type="text" id="search-input" placeholder="Search articles...">
    </div>

    <div class="news-container" id="news-container"></div>

    <script>
        let allArticles = [];

        async function fetchNews() {
            try {
                const apiKey = 'cd6262fd680d4dc59244db1cf7c2445b';
                const url = `https://newsapi.org/v2/top-headlines?country=us&category=business&apiKey=${apiKey}`;
                const response = await fetch(url);
                const data = await response.json();

                allArticles = data.articles.slice(0, 20); // store all articles
                displayArticles(allArticles);
            } catch (error) {
                console.error('Error fetching news:', error);
                document.body.innerHTML = "<p>Error loading news data. Please try again later.</p>";
            }
        }

        function displayArticles(articles) {
            const container = document.getElementById('news-container');
            container.innerHTML = '';

            if (articles.length === 0) {
                container.innerHTML = "<p>No matching articles found.</p>";
                return;
            }

            articles.forEach(article => {
                const newsDiv = document.createElement('div');
                newsDiv.classList.add('news-card');

                newsDiv.innerHTML = `
                    <a href="${article.url}" target="_blank">
                        <img src="${article.urlToImage || 'https://via.placeholder.com/250x150'}" alt="News Image">
                        <h3>${article.title || 'No title available'}</h3>
                    </a>
                `;

                container.appendChild(newsDiv);
            });
        }

        document.getElementById('search-input').addEventListener('input', function() {
            const query = this.value.toLowerCase();
            const filteredArticles = allArticles.filter(article =>
                article.title && article.title.toLowerCase().includes(query)
            );
            displayArticles(filteredArticles);
        });

        fetchNews();
    </script>
</body>
</html>
